Redis data layout
=================

Games
-----

::

    games (list of game gids)
    games:next (gid for new game)
    games:{gid} (hash with data of game {gid})
        owner (username of owner)
        name (name of game)
        state (state of game, one of: setup | started | ended)
        last_player (pid of player whose turn will be the last in the game)
        current_player (pid of current player)
    games:{gid}:winners (list of player pids who won the game {gid})
    games:{gid}:deck (list of cards in the deck,
                      each one of: red | yellow | blue | green | purple | ninja)
    games:{gid}:current_player_channel (pub/sub channel publishing pid of the
                                        current player)

Players
-------

::

    games:{gid}:players (list o player pids for game {gid})
    games:{gid}:players:next (pid for new player)
    games:{gid}:players:{pid} (hash with data of player {pid}
        user (username of user)
        color (color of player, one of: red | yellow | blue | green | purple)
    games:{gid}:players:{pid}:hand (list of cards in player's hand,
                    each one of: red | yellow | blue | green | purple | ninja)
    games:{gid}:players:{pid}:cards (hash with data about cards in a player's
                                     province)
        red (number of red cards)
        yellow (number of yellow cards)
        blue (number of blue cards)
        green (number of green cards)
        purple (number of purple cards)

Users
-----

::
    users:{username} (hash with data of user {username})
        password_hash (password hash generated by
                       werkzeug.security.generate_password_hash)
        score (number of games won by user) 
